// This list flow is responsible for listing or editing the Super Gluu devices that the logged-in user has registered
Flow org.gluu.agama.supergluu.list
     Basepath ""
     Inputs userData scimSetting
// Mark log startup
Log "@debug List flow started"
// Set inum = userData.inum
inum = userData.inum
scimFido2Helper = Call org.gluu.agama.supergluu.ScimFido2Helper#new scimSetting
fidoDevice = Call scimFido2Helper getFidoDeviceByUser inum
obj = { fidoDevice: fidoDevice, showError: false, errorTitle: "", errorMessage: "", canEdit: false }
Repeat 5 times max
     listForm = RRF "list.ftlh" obj
     Log "@debug List form response %" listForm
     When listForm.addBtn is ""
          addFlow = Trigger org.gluu.agama.supergluu.add userData scimSetting
          Log "@debug Enrollment flow response %" addFlow
          When addFlow.success is true
               obj.fidoDevice = Call scimFido2Helper getFidoDeviceByUser inum
     When listForm.loginBtn is ""
          authFlow = Trigger org.gluu.agama.supergluu.add userData scimSetting
     When listForm.editItemBtn is ""
          obj.canEdit = true
          obj.showError = false