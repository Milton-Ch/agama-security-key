// This flow is responsible for setting a nickname for the super gluu device that completes the enrollment
Flow org.gluu.agama.supergluu.nickname
     Basepath ""
     Configs deviceId userData scimSetting
// Mark startup logs
Log "@debug Nickname flow started"
// inum and name declaration variable
inum = userData.inum
name = userData.name
// Load nickname.ftlh page
nicknameForm = RRF "nickname.ftlh" 
// Log of the form loaded response
Log "@debug Nickname form response %" nicknameForm
// Get instance SGValidator
sgEnroller = Call org.gluu.agama.supergluu.SGValidator#new 
// Call method to save the entered nickname
attached = Call sgEnroller attach inum deviceId nicknameForm.nickname
When attached is false
     // Ends with an error if the user failed to associate the super gluu device
     it_gexrq = {success:false, error: "Enrolled device couldn't be attached to user profile"}
     Finish it_gexrq