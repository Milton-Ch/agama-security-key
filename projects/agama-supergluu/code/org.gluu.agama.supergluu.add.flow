// This flow handles the registration of a new super gluu device
Flow org.gluu.agama.supergluu.add
     Basepath ""
     Configs conf
     Inputs userData scimSetting
// Mark startup logs
Log "@debug Add a super gluu flow is started"
// Load pre-enrollment.ftlh page
obj = RRF "pre-enrollment.ftlh" 
When obj.cancelBtn is ""
     // Finish with cancellation event
     it_ouucf = {success:false, error: "Pre enrollment cancellation"}
     Finish it_ouucf
// Set inum = userData.inum
inum = userData.inum
// Get instance SGValidator
sgEnroller = Call org.gluu.agama.supergluu.SGValidator#new scimSetting
// Generate enrollment request
req = Call scimSetting QRRequest null
Log "@debug Enrollment request generated %" req
// Set dn = data.first
dn = data.first
When dn is null
     it_clxys = {success:false, error: "data.second"}
     Finish it_clxys